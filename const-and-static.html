<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="rustdoc">
    <title>`const` e `static`</title>

    <link rel="stylesheet" type="text/css" href="rustbook.css">

    
</head>
<body class="rustdoc">
    <!--[if lte IE 8]>
    <div class="warning">
        This old browser is unsupported and will most likely display funky
        things.
    </div>
    <![endif]-->

    
                <div id="nav">
                    <button id="toggle-nav">
                        <span class="sr-only">Toggle navigation</span>
                        <span class="bar"></span>
                        <span class="bar"></span>
                        <span class="bar"></span>
                    </button>
                </div>
<div id='toc' class='mobile-hidden'>
<ul class='chapter'>
<li><a  href='README.html'><b>1.</b> Introduzione</a>
</li>
<li><a  href='getting-started.html'><b>2.</b> Come Iniziare</a>
</li>
<li><a  href='guessing-game.html'><b>3.</b> Tutorial: Gioco-indovina</a>
</li>
<li><a  href='syntax-and-semantics.html'><b>4.</b> Sintassi e semantica</a>
<ul class='section'>
<li><a  href='variable-bindings.html'><b>4.1.</b> Legami di variabili</a>
</li>
<li><a  href='functions.html'><b>4.2.</b> Funzioni</a>
</li>
<li><a  href='primitive-types.html'><b>4.3.</b> Tipi primitivi</a>
</li>
<li><a  href='comments.html'><b>4.4.</b> Commenti</a>
</li>
<li><a  href='if.html'><b>4.5.</b> if</a>
</li>
<li><a  href='loops.html'><b>4.6.</b> Cicli</a>
</li>
<li><a  href='vectors.html'><b>4.7.</b> Vettori</a>
</li>
<li><a  href='ownership.html'><b>4.8.</b> Possesso</a>
</li>
<li><a  href='references-and-borrowing.html'><b>4.9.</b> Riferimenti e prestito</a>
</li>
<li><a  href='lifetimes.html'><b>4.10.</b> Tempo di vita</a>
</li>
<li><a  href='mutability.html'><b>4.11.</b> Mutabilità</a>
</li>
<li><a  href='structs.html'><b>4.12.</b> Strutture</a>
</li>
<li><a  href='enums.html'><b>4.13.</b> Enumerazioni</a>
</li>
<li><a  href='match.html'><b>4.14.</b> Match</a>
</li>
<li><a  href='patterns.html'><b>4.15.</b> Pattern</a>
</li>
<li><a  href='method-syntax.html'><b>4.16.</b> Sintassi dei metodi</a>
</li>
<li><a  href='strings.html'><b>4.17.</b> Stringhe</a>
</li>
<li><a  href='generics.html'><b>4.18.</b> Genericità</a>
</li>
<li><a  href='traits.html'><b>4.19.</b> Tratti</a>
</li>
<li><a  href='drop.html'><b>4.20.</b> Drop</a>
</li>
<li><a  href='if-let.html'><b>4.21.</b> `if let`</a>
</li>
<li><a  href='trait-objects.html'><b>4.22.</b> Oggetti-tratti</a>
</li>
<li><a  href='closures.html'><b>4.23.</b> Chiusure</a>
</li>
<li><a  href='ufcs.html'><b>4.24.</b> Sintassi universale di chiamata di funzione</a>
</li>
<li><a  href='crates-and-modules.html'><b>4.25.</b> Crate e moduli</a>
</li>
<li><a class='active' href='const-and-static.html'><b>4.26.</b> `const` e `static`</a>
</li>
<li><a  href='attributes.html'><b>4.27.</b> Attributi</a>
</li>
<li><a  href='type-aliases.html'><b>4.28.</b> Alias tramite `type`</a>
</li>
<li><a  href='casting-between-types.html'><b>4.29.</b> Forzatura di tipo</a>
</li>
<li><a  href='associated-types.html'><b>4.30.</b> Tipi associati</a>
</li>
<li><a  href='unsized-types.html'><b>4.31.</b> Tipi non dimensionati</a>
</li>
<li><a  href='operators-and-overloading.html'><b>4.32.</b> Operatori e sovraccaricamento</a>
</li>
<li><a  href='deref-coercions.html'><b>4.33.</b> Coercizione Deref</a>
</li>
<li><a  href='macros.html'><b>4.34.</b> Le macro</a>
</li>
<li><a  href='raw-pointers.html'><b>4.35.</b> Puntatori grezzi</a>
</li>
<li><a  href='unsafe.html'><b>4.36.</b> `unsafe`</a>
</li>
</ul>
</li>
<li><a  href='effective-rust.html'><b>5.</b> Rust efficace</a>
<ul class='section'>
<li><a  href='the-stack-and-the-heap.html'><b>5.1.</b> Lo stack e lo heap</a>
</li>
<li><a  href='testing.html'><b>5.2.</b> Collaudo</a>
</li>
<li><a  href='conditional-compilation.html'><b>5.3.</b> Compilazione condizionale</a>
</li>
<li><a  href='documentation.html'><b>5.4.</b> Documentazione</a>
</li>
<li><a  href='iterators.html'><b>5.5.</b> Iteratori</a>
</li>
<li><a  href='concurrency.html'><b>5.6.</b> Concorrenza</a>
</li>
<li><a  href='error-handling.html'><b>5.7.</b> Gestione degli errori</a>
</li>
<li><a  href='choosing-your-guarantees.html'><b>5.8.</b> Scegliere le garanzie</a>
</li>
<li><a  href='ffi.html'><b>5.9.</b> FFI</a>
</li>
<li><a  href='borrow-and-asref.html'><b>5.10.</b> Prestito e AsRef</a>
</li>
<li><a  href='release-channels.html'><b>5.11.</b> Canali di rilascio</a>
</li>
<li><a  href='using-rust-without-the-standard-library.html'><b>5.12.</b> Usare Rust senza la libreria standard</a>
</li>
</ul>
</li>
<li><a  href='nightly-rust.html'><b>6.</b> Rust notturno</a>
<ul class='section'>
<li><a  href='compiler-plugins.html'><b>6.1.</b> Plugin del compilatore</a>
</li>
<li><a  href='inline-assembly.html'><b>6.2.</b> Assembly in-line</a>
</li>
<li><a  href='no-stdlib.html'><b>6.3.</b> Omettere la libreria stdandard</a>
</li>
<li><a  href='intrinsics.html'><b>6.4.</b> Intrinseci</a>
</li>
<li><a  href='lang-items.html'><b>6.5.</b> Elementi "lang"</a>
</li>
<li><a  href='advanced-linking.html'><b>6.6.</b> Link avanzato</a>
</li>
<li><a  href='benchmark-tests.html'><b>6.7.</b> Collaudi prestazionali</a>
</li>
<li><a  href='box-syntax-and-patterns.html'><b>6.8.</b> Sintassi di box e relativi pattern</a>
</li>
<li><a  href='slice-patterns.html'><b>6.9.</b> Pattern di slice</a>
</li>
<li><a  href='associated-constants.html'><b>6.10.</b> Costanti associate</a>
</li>
<li><a  href='custom-allocators.html'><b>6.11.</b> Allocatori personalizzati</a>
</li>
</ul>
</li>
<li><a  href='glossary.html'><b>7.</b> Glossario</a>
</li>
<li><a  href='syntax-index.html'><b>8.</b> Indice analitico della sintassi</a>
</li>
</ul>
</div>
<div id='page-wrapper'>
<div id='page'>


    <h1 class="title">`const` e `static`</h1>
    <p>In Rust si possono definire costanti usando la parola-chiave <code>const</code>:</p>

<span class='rusttest'>fn main() {
    const N: i32 = 5;
}</span><pre class='rust rust-example-rendered'>
<span class='kw'>const</span> <span class='ident'>N</span>: <span class='ident'>i32</span> <span class='op'>=</span> <span class='number'>5</span>;</pre>

<p>Diversamente dai legami <a href="variable-bindings.html"><code>let</code></a>, il tipo di un <code>const</code> deve essere
annotato.</p>

<p>Le costanti vivono per tutto il tempo di vita del programma.
Più specificamente, le costanti in Rust non hanno indirizzi fissi in memoria.
Questo avviene perché di fatto vengono espanse inline in ogni posto in cui
sono usate. Per questa ragione, non è garantito che più riferimenti
alla stessa costante si riferiscano allo stesso indirizzo di memoria.</p>

<h1 id='static' class='section-header'><a href='#static'><code>static</code></a></h1>
<p>Rust fornisce una sorta di funzionalità di ‘variabile globale’ sotto forma
di elementi statici. Sono simili a costanti, ma gli elementi statici non sono
espansi inline quando sono usati. Ciò significa che c&#39;è solo un&#39;istanza
per ogni valore, e si trova in una posizione fissa in memoria.</p>

<p>Ecco un esempio:</p>

<span class='rusttest'>fn main() {
    static N: i32 = 5;
}</span><pre class='rust rust-example-rendered'>
<span class='kw'>static</span> <span class='ident'>N</span>: <span class='ident'>i32</span> <span class='op'>=</span> <span class='number'>5</span>;</pre>

<p>Diveramente dai legami <a href="variable-bindings.html"><code>let</code></a>, si deve annotare il tipo di uno <code>static</code>.</p>

<p>Gli static vivono per tutta lo il tempo di vita del programma, e perciò
ogni riferimento immagazzinato in una costante è un <a href="lifetimes.html">tempo di vita <code>&#39;static</code></a>:</p>

<span class='rusttest'>fn main() {
    static NAME: &amp;&#39;static str = &quot;Stefano&quot;;
}</span><pre class='rust rust-example-rendered'>
<span class='kw'>static</span> <span class='ident'>NAME</span>: <span class='kw-2'>&amp;</span><span class='lifetime'>&#39;static</span> <span class='ident'>str</span> <span class='op'>=</span> <span class='string'>&quot;Stefano&quot;</span>;</pre>

<h2 id='mutabilità' class='section-header'><a href='#mutabilità'>Mutabilità</a></h2>
<p>La mutabilità si introduce usando la parola-chiave <code>mut</code>:</p>

<span class='rusttest'>fn main() {
    static mut N: i32 = 5;
}</span><pre class='rust rust-example-rendered'>
<span class='kw'>static</span> <span class='kw-2'>mut</span> <span class='ident'>N</span>: <span class='ident'>i32</span> <span class='op'>=</span> <span class='number'>5</span>;</pre>

<p>Dato che questo è mutabile, un thread potrebbe aggiornare <code>N</code> mentre un altro
lo sta leggendo, provocando insicurezza di memoria. Il fatto che entrambi
accedano e mutino uno <code>static mut</code> è <a href="unsafe.html">insicuro [<code>unsafe</code>]</a>, e quindi
tali accessi devono essere fatti in un blocco <code>unsafe</code>:</p>

<span class='rusttest'>fn main() {
    static mut N: i32 = 5;

unsafe {
    N += 1;

    println!(&quot;N: {}&quot;, N);
}
}</span><pre class='rust rust-example-rendered'>

<span class='kw'>unsafe</span> {
    <span class='ident'>N</span> <span class='op'>+=</span> <span class='number'>1</span>;

    <span class='macro'>println</span><span class='macro'>!</span>(<span class='string'>&quot;N: {}&quot;</span>, <span class='ident'>N</span>);
}</pre>

<p>Inoltre, ogni tipo immagazzinato in uno <code>static</code> deve essere <code>Sync</code>, non deve
implementare il tratto <a href="drop.html"><code>Drop</code></a>.</p>

<h1 id='inizializzazione' class='section-header'><a href='#inizializzazione'>Inizializzazione</a></h1>
<p>Sia <code>const</code> che <code>static</code> hanno requisiti per dargli un valore. Devono ricevere
un valore che sia un&#39;espressione costante. In altre parole, non si può usare
il risultato di una chiamata di funzione o qualcosa di similmente complesso
eseguito in fase di esecuzione.</p>

<h1 id='quale-costrutto-di-dovrebbe-usare' class='section-header'><a href='#quale-costrutto-di-dovrebbe-usare'>Quale costrutto di dovrebbe usare?</a></h1>
<p>Quasi sempre, se si può  scegliere fra i due, si scelga <code>const</code>. È piuttosto
raro voler effettivamente una posizione di memoria associato a tale costante,
e usare un <code>const</code> consente ottimizzazioni come la propagazione di costanti
non solo nel proprio crate ma anche nei crate da esso utilizzati.</p>

    <script type="text/javascript">
        window.playgroundUrl = "https://play.rust-lang.org";
    </script>
    <script src='rustbook.js'></script>
<script src='playpen.js'></script>
</div></div>


</body>
</html>